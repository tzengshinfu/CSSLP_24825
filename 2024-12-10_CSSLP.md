Domain 2:
Secure Software Life Cycle Management

2.1 Security within a Software Development
- Waterfall Model
  - å„ªé»: ç©©å¥å¯é  æŒ‰æ­¥å°±ç­
  - ç¼ºé»: æ› æ—¥è²»æ™‚ ä¸åˆæ™‚éœ€

- SDLC=Software Development Lifecycle
- SSDLC=Secure Software Development Lifecycle
ç¾å¯¦é¢ï¼šç•¶è³‡å®‰VSé–‹ç™¼æ²–çªæ™‚ï¼Œé‚„æ˜¯ä»¥äº¤ä»˜ç‚ºä¸»ã€‚

èˆ‡ç¾å¯¦é¢çš„å¦¥å”->æˆç†Ÿåº¦æ¨¡å‹

è¦ææ‡‚"è³‡ç”¢åƒ¹å€¼"ï¼Œå› ç‚ºå°SSDLCæˆæœ¬å¾ˆé«˜ã€‚
åƒé¨GOGOROç©¿é˜²æ‘”æœä¸€æ¨£å¡å¡ã€‚

- Microsoft Security Development Lifecycle (SDL)(è³‡å®‰æ˜¯ä¸»è§’ï¼Œè»Ÿé«”é–‹ç™¼æ˜¯é…è§’)
Getting Issue(æ²’é€šéå¡é—œæ¢ä»¶å°±ä¸èƒ½ç™¼ä½ˆ)
  - æä¾›è¨“ç·´
  - å®šç¾©è³‡å®‰éœ€æ±‚: å…ˆå®šç¾©å¯æ¥å—çš„é¢¨éšª
  - éœ€æ±‚é‡åŒ–æŒ‡æ¨™åŠåˆè¦
  - å¨è„…é€ æ¨¡threat modeling
  - é æ¸¬->æ”»æ“Š->æ±ºå®šé˜²è­·
  - æ±ºå®šåŠ å¯†æ¨™æº–(çµ‚æ¥µæ–¹æ¡ˆ é–€æª»é«˜ å¾ˆå®¹æ˜“çŠ¯éŒ¯ è¢«ç ´è§£ å¾ˆéº»ç…©)
  - ç®¡ç†ç¬¬ä¸‰æ–¹å…ƒä»¶çš„é¢¨éšª
  - ä½¿ç”¨å¤§çœ¾è¢«èªåŒçš„å·¥å…·
  - éœæ…‹åˆ†æ(SAST)
  - å‹•æ…‹åˆ†æ(DAST)->å¦‚æœæ²’éŒ¢ å°±èŠ±é€™ä¸€æ¢
  - æ»²é€æ¸¬è©¦(PT=Penetration Testing)
  - å®šç¾©äº‹æ•…æ‡‰è®Šçš„æ¨™æº–ç¨‹åº(å®¢æˆ¶å ±issueçš„è™•ç†)

The 7 Touchpoints of Secure Software(Cigitalæå‡ºï¼Œè¢«æ·˜æ±°)
1. è¦ç”¨å·¥å…·Code Review->è«‹ç”¨Cigitalå·¥å…·ğŸ’°ğŸ’°ğŸ’°
2. é¢¨éšªåˆ†æ->é€™æ‰æ˜¯æœ€é‡è¦çš„äº‹
3. æ»²é€æ¸¬è©¦->çµ¦è€é—†çŸ¥é“å¤šåš´é‡
4. é¢¨éšªå°å‘å®‰å…¨æ¸¬è©¦->ä¸ç”¨100% è·Ÿä¿éšªä¸€æ¨£ä¸ç”¨å…¨è²·
5. æ”»æ“Šæƒ…å¢ƒ(æ¿«ç”¨æ¡ˆä¾‹)
6. ä»¥ä¸Š5é»å¾—å‡ºå®‰å…¨éœ€æ±‚
7. è³‡å®‰ä½œæ¥­
8. å¤–éƒ¨ç¨½æ ¸(é¿å…åŒæº«å±¤ ä¸åŒæ€ç¶­çš„ç¢°æ’)

å‚³çµ±PT æ‰€æœ‰æªæ–½è©•ä¼°ä¸€è¼ª vs ç´…éšŠ äº†è§£å¯æ”»æ“Šé¢ç© é›†ä¸­æ”»æ“Š

Agile Methods
æ•æ·é–‹ç™¼ å› æ‡‰ç¾å¯¦ä¸–ç•Œä¸€æ—¥æ•¸è®Š
æ‹†æˆå°éƒ¨åˆ†äº¤ä»˜
å¿«é€Ÿè®Šå‹•
æ³¨é‡ç´€å¾‹
åƒæ©„æ¬–çƒä¸€æ¨£ä¸€ç›´æ²–åˆºæ¨é€²ç›´åˆ°é”é™£
(é–‹ç™¼æœŸé–“ä¸åšè³‡å®‰)
ç­‰æ²–å®Œå†åšè³‡å®‰

    Extreme Programming(XP)
    - Pair programming
    - Refactoring
    - Collective ownership(é›†é«”ç¨‹å¼ç¢¼å…±æœ‰ ç„¡è«–å¥½å£ä¸€èµ·æ‰¿æ“”)

Agile->Delivery->AgileOps->DevOps(Dev+QA+Ops)->CI/CD pipeline->Fully Automation

Security Artifact

CI/CD pipeline
æŒçºŒæ•´åˆ(é€²code)/æŒçºŒå»ºç½®(compile/packaging)/æŒçºŒäº¤ä»˜(ä¸Šæ¶)/æŒçºŒéƒ¨ç½®(å®‰è£/é‹ä½œ)  
â†‘                   â†‘                          â†‘            â†‘  
æ¸¬è©¦+Security=DevSecOps

å“ç®¡QC è©²ä½œçš„ä½œäº†
- æªæ–½
- æ´»å‹•
- æµç¨‹

å“ä¿QA ç¢ºèªQCæªæ–½æ´»å‹•æµç¨‹çš„æœ‰æ•ˆç”Ÿ
- ç¨½æ ¸
- æ¸¬è©¦
- ç›£æ§

Security Standard (2.2)
ä½œæ¥­æ¨™æº–
- Inventory of Hardware and Software Assetsç›¤é»è³‡è¨Šè³‡ç”¢
- Benchmarksè©•ä¼°æŒ‡æ¨™

    Center of Internet Security(CIS) ç¾åœ‹æ”¿åºœæ”¯æŒçš„æ°‘é–“çµ„ç¹”
    - CIS Benchmarksè©²é–‹çš„è¦é–‹ è©²é—œçš„è¦é—œ
    - Level 1 Profile
    - No extensive performance impact
    - Level 2 Profile
    - Adverse performance impact if not implemented appropriately

    å®‰å…¨æ˜¯è—¥ è€Œè—¥ä¹Ÿæ˜¯æ¯’ è³‡å®‰ç«™åœ¨ä»»ä½•äº‹ç‰©çš„å°ç«‹é¢ æˆ´å®‰å…¨å¸½æˆ–ç©¿å…¨å¥—è»Šè¡£ï¼Ÿ ä¿éšªè²·å¹¾å¼µæˆ–å…¨éƒ¨ï¼Ÿ æƒ³æƒ³åŸå§‹ç›®çš„è¦ä»€éº¼ï¼Ÿ

    Security Technical Implementation Guide(STIG)
    DISAç¾åœ‹è»æ–¹è³‡è¨Š å•†æ¥­æ–¹æ¡ˆä¸å»ºè­° æ¢ä»¶éè‹›
    - Category 1.
    - Category 2.
    - Category 3.

åŸå›  CWEè»Ÿé«”è„†å¼±æ€§(SQLæ³¨å…¥/XSS/buffer overflow)  
â”‚  
â–¼  
çµæœ CVEè»Ÿé«”æ¼æ´

1. ç›®æ¨™å’Œç¯„åœå®šç¾© Planning
2. çµ„æ…‹ç¾æ³=ç‹€æ…‹ç‚ºä½•?é‡åŒ– Configuration
3. æ§åˆ¶"æ”¹è®Šç›®å‰ç‹€æ…‹"->ç¬¦åˆåŸºæº–å€¼
4. æŒçºŒç›£æ§

2.3 Strategy Roadmap
å¤§éƒ¨åˆ†ä¸èµ°SSDLC
æ”¹ç”¨æˆç†Ÿåº¦æ¨¡å‹

OWASPçš„OpenSAMM(å¹³åƒ¹)

- Governance
  - Policy and Compliance
  - Strategy and Metrics å»ºæ¨¡é‡åŒ–æŒ‡æ¨™
  - Education and Guidance æœ€ä½³é–‹ç™¼å¯¦è¸
- Construction
  - Security Requirements
  - Threat Assessment
  - Secure Architecture
- Verification (Test)
  - Implementation Review: ç¨‹å¼ç¢¼æª¢æ¸¬
  - Design Review
  - Security Testing
- Operation
  - Environment Hardening: ç’°å¢ƒå¼·åŒ–
  - Issue Management
  - Operational Enablement

CAPECå¸¸è¦‹æ”»æ“Šæ‰‹æ³•è³‡æ–™åº«

çœ‹éœ€æ±‚æ±ºå®šç­‰ç´š

SAMM Maturity Levels
- Level 0: ä»€éº¼éƒ½ä¸åš
- Level 1: ç´„12é …
- Level 2: ç´„40é …
- Level 4: ç´„120é …

DevSecOps Maturity Model(DSOMM)
å¤ªæ–°äº†

Building Security in Maturity Model(å¤ªè²´äº† BSIMM Cigitalæå‡º)

Cybersecurity Maturity Model Certification (CMMC ç¾åœ‹è»æ–¹æ¨å‡º)

**ä»¥ä¸Šæ¡†æ¶é¸1å€‹ä¾†å¯¦æ–½å°±å¥½**

Security Documentation
æœ€é‡è¦æ˜¯SSP System Security Planning

Security Metrics

First(Forum of Incident Response and Security Teams) æå‡ºCVSS

æ¼æ´
- 0 Day é«˜åƒ¹å€¼æ‰æœƒè¢«æ‰“ å°ä¸€èˆ¬äººæ²’ä»€éº¼å‚·å®³
- 1 Day å°ä¸€èˆ¬äººæœ€å¤§å‚·å®³ æ¼æ´é€šå ±ä¸€å‡ºä¾† ä¸€å †æ”»æ“Šå°±å‡ºä¾† é§­å®¢ç…§æœ¬å®£ç§‘ åˆ©ç”¨ä¸Špatchçš„æ™‚é–“å·®
- N Days

å°ç£é§­å®¢ç¬¬ä¸€æŠŠäº¤æ¤… https://blog.orange.tw/

æ¼æ´æ˜¯åœ‹å®¶ç´šç‰©è³‡

NIST SMATE(CODE SCANNERæ‡¶äººåŒ…) https://www.nist.gov/itl/ssd/software-quality-group/samate

Decommission Applications
|-----------------------äº¤ä»˜-----------------------|
ç•¶è»Ÿé«”EOS(End of Support)
è¦è€ƒæ…®EOL(End of Life)

è»Ÿé«”ç‚ºä½•è¦é€²ç‰ˆï¼Ÿ
1. åŠ feature
2. è§£bug

è»Ÿé«”ç‚ºä»€éº¼EOLï¼Ÿå¯èƒ½æ˜¯èˆŠç‰ˆç„¡æ³•ä¿®æ­£ åªèƒ½å¦é–‹æ–°ç‰ˆã€‚
æœ€å®Œç¾ã€æœ€ç©©å®šçš„ç‹€æ…‹ï¼Ÿæˆ–è€…æ˜¯ç„¡å¯æ•‘è—¥çš„ç‹€æ…‹ï¼Ÿ

Windows XPç¾åœ‹æµ·è»ç”¨3åƒè¬ç¾é‡‘ç¹¼çºŒæ›´æ–° æˆæœ¬å¤ªé«˜ç„¡æ³•æ‰¿æ“”

Data Archiving
Media Sanitization
ç­‰ç´š
- Low
- Moderate
- High
æ‰‹æ³•
- Clearæ®˜ç•™
- Purgeä¸æ®˜ç•™
- Destroyå¯¦é«”éŠ·æ¯€

Assessing Risks and Applying Destructive Techniques
åœ¨é›²ç«¯ ç„¡æ³•å¯¦é«”éŠ·æ¯€ æ”¹ç”¨åŠ å¯†åˆªé™¤æ³• æŠŠé‡‘é‘°éŠ·æ¯€ è³‡æ–™å¹¾ä¹æ°¸é ç„¡æ³•é‚„åŸ

Organizational Security Reporting
Incident Responseç›®çš„->Return to Normal
æ ¹å› åˆ†æ->é é˜²çŸ¯é˜²------->æ˜¯è¦æˆæœ¬ä¾†åš!
æ‰¾å‡ºå•é¡Œå¾ˆè²´
è™•ç†äº‹æ•…å¾ˆä¾¿å®œ
ç¼ºä¹å°å•é¡Œçš„è­¦è¦ºæ€§

```
    exploit code
         â–²   æ©Ÿæœƒ--->æ¶ˆæ»…å¯èƒ½æ€§
         â”‚    â–²
         â”‚    â”‚
[å¨è„…]/[åˆ©ç”¨][å¼±é»]å°[è³‡ç”¢]é€ æˆ[å½±éŸ¿çš„å¯èƒ½æ€§]
   â”‚                  â”‚           â”‚
   â”‚                  â–¼           â–¼
   â”‚             [åƒ¹å€¼=é‡è¦æ€§]   [é¢¨éšª]
   â–¼
- éè“„æ„
- è“„æ„
  - è»äº‹åŒ–
  - çŠ¯ç½ªåŒ–
  - æ¿€é€²ä¸»ç¾©
```

é¢¨éšªç®¡ç†(è¦èƒŒ)
- Mitigate: è§£ç·©
- Accept: æ¥å—
- Transfer: è½‰ç§»(å¦‚è²·ä¿éšª)
- Avoid: é¿å…

Business Risk      >       Technical Risk
(æ³¨é‡èƒŒå¾Œçš„ç‡Ÿé‹é¢¨éšª)        (ä¸åªæ³¨é‡æŠ€è¡“é¢¨éšª)

Copyrightæ˜¯ä½œè€…æœ‰è‘—ä½œæ¬Š
Copyleftæ˜¯è»Ÿé«”æœ¬èº«æœ‰è‘—ä½œæ¬Š(ç”±ä½œè€…ä»£å‘Š)
è¦ç”¨Copyleftå¿…é ˆè¦å…¬é–‹è¢«ä¿®æ”¹çš„éƒ¨ä»½

èƒ½èŠ±éŒ¢è²·å°±èŠ±éŒ¢è²·->äº‹æƒ…å–®ç´”

Breach Notification
å¤–æ´©é€šçŸ¥
- è³‡å®‰
- å€‹è³‡

æ¶æ§‹é¢¨éšª
- Known å·²çŸ¥æ¼æ´
- Ambiguity analysis æ¶æ§‹æ··äº‚
- Underlying platform vulnerability analysis åº•å±¤å¹³å°çš„æ¼æ´  
    æœ€å¯èƒ½çš„æ¼æ´
    Application-->ç¨‹å¼ä¹Ÿè¦è·Ÿè‘—æ”¹
    ___________
    Framework---->é–‹ç™¼teamä¸å–œæ­¡æ›´æ–°
    ___________
    AP Server---->é–‹ç™¼teamä¸å–œæ­¡æ›´æ–°
    ___________
    OS

Risks to the Deployment Environment
- Excessive physical access to the data centers  
    æ©Ÿæˆ¿é€²å‡ºç®¡åˆ¶çš„é‡è¦æ€§
    LAN turtle: çœ‹èµ·ä¾†æœ€ç„¡å®³çš„æ»²é€å·¥å…·
    https://shop.hak5.org/products/lan-turtle?

Virtualization and Containerization
è™›æ“¬åŒ–æŠ€è¡“
Isolationéš”é›¢
- AP: Sandbox
  - å…±ç”¨Runtime
  - ç¨ç«‹Memory
  - éš”é›¢æ•ˆæœï¼šæœ€å·®
  - è³‡æºï¼šæœ€å°‘
  - å®‰å…¨ï¼šæœ€å¼±
- OS: Container
  - å…±ç”¨OS
  - ç¨ç«‹Runtime
  - éš”é›¢æ•ˆæœï¼šä¸­
  - è³‡æºï¼šä¸­
  - å®‰å…¨ï¼šä¸­
- H/W: VM
  - å…±ç”¨ç¡¬é«”
  - OSç¨ç«‹
  - éš”é›¢æ•ˆæœï¼šæœ€å¥½
  - è³‡æºï¼šæœ€å¤š
  - å®‰å…¨ï¼šæœ€å¼·

Application
___________
Runtime  
[Container_Engine]
___________
OS  
[Hypervisor]
___________
H/W

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚   â”‚  â”‚ Application â”‚  â”‚   â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚   â”‚    [Sandbox]      â”‚   â”‚
â”‚   â”‚     Runtime       â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚      [Container_Engine]   â”‚ Container image Application Configuration
â”‚            OS             â”‚ K8S
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         [Hypervisor]
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
             H/W
```

Continous Monitoring:(è¦èƒŒ)
- Verification
    Do thing right
- Validation
    Do right thing